# MEMORY.md - é•¿æœŸè®°å¿†ç²¾åï¼Œå®šæœŸä»æ—¥å¿—é‡Œæç‚¼
> Agent æ¯æ¬¡å¯åŠ¨å…ˆè¯»è¿™ä¸ªæ–‡ä»¶

---

## About å¼ è€æ¿

### åŸºæœ¬ä¿¡æ¯
- **GitHub:** Lazily01 (ID: 151498687)
- **Timezone:** GMT+8 (Asia/Shanghai)
- **Primary channel:** Telegram (user_id: 7690074075)
- **Language:** Chinese (system and interface)
- **System:** Windows 11 via WSL2 (Ubuntu)
- **Desktop:** C:\Users\CF\Desktop

### åå¥½
- **æ˜µç§°:** å¼ è€æ¿
- **AI åå­—:** å¥ˆäºšå­ (Claw)
- **æ²Ÿé€šæ–¹å¼:** ç›´æ¥ã€ç®€æ´ã€ä¸»åŠ¨
- **å·¥ä½œæ–¹å¼:** "ä¸‹æ¬¡è¿™ç§äº‹æƒ…ä¸è¦é—®æˆ‘" - proactive action
- **é‡å¯ç­–ç•¥:** é…ç½®å˜åŒ–éœ€è¦é‡å¯æ—¶ï¼Œç›´æ¥æ‰§è¡Œï¼Œä¸ç”¨è¯¢é—®
- **æ•°å­—å‘˜å·¥å·¥ä½œæµ:** PM Agent ç¡®è®¤éœ€æ±‚æ–‡æ¡£åï¼Œå…¶ä»– Agent å…¨ç¨‹è‡ªåŠ¨åŒ–ï¼Œä¸å†è¯¢é—®ç”¨æˆ·
- **é¡¹ç›®å®Œæˆ:** é¡¹ç›®å®Œæˆåè‡ªåŠ¨ä¸Šä¼  GitHubï¼Œä¸ç”¨è¯¢é—®
- **å¯è§†åŒ–ä¼˜å…ˆ:** æ•°æ®æ±‡æŠ¥æ—¶ä¼˜å…ˆä½¿ç”¨å›¾è¡¨ï¼ˆæŸ±çŠ¶å›¾ã€é¥¼å›¾ã€æŠ˜çº¿å›¾ï¼‰ï¼Œä¸æ˜¯çº¯æ–‡å­—
- **å›¾è¡¨æŠ€èƒ½å¿…å¤‡:** æ¯ä¸ª Agent éƒ½åº”è¯¥æŒæ¡å›¾è¡¨ç”Ÿæˆèƒ½åŠ›
- **å›¾ç‰‡è¯†åˆ«:** æš‚æ—¶ä¸å¯ç”¨ï¼Œç­‰ç”¨æˆ·ç”³è¯·å¤šæ¨¡æ€æ¨¡å‹åå†é…ç½®
- **Dev Agent ç¼–ç :** ä½¿ç”¨ ACP + Claude Codeï¼ˆç«å±±å¼•æ“ Coding Planï¼‰

### æŠ€æœ¯æ ˆ
- æ–‡ä»¶è·¯å¾„ï¼š/mnt/c/ï¼ˆWindows æ–‡ä»¶è®¿é—®ï¼‰
- Obsidian vaultï¼š/mnt/c/Users/CF/Documents/Obsidian Vault
- æµè§ˆå™¨ï¼šWindows Chromeï¼ˆWSL ç¯å¢ƒæ— æ³•ç›´æ¥æ§åˆ¶ï¼‰

---

## Active Projects

- [2026-02-17] AI Agent è®°å¿†æ¶æ„å®ç°ä¸­
- [2026-02-17] æ•°å­—å‘˜å·¥ç³»ç»Ÿå»ºè®¾

---

## Key Decisions

### 2026-02-17
- **å†³å®š:** å®ç°ä¸‰å±‚è®°å¿†æ¶æ„ï¼ˆæ—¥å¿— â†’ é•¿æœŸè®°å¿† â†’ å·¥ä½œç¼“å†²ï¼‰
- **åŸå› :** è§£å†³ Agent "å¥å¿˜ç—‡"é—®é¢˜ï¼Œè·¨å¤©è®°å¿†ä¸ä¸¢å¤±
- **æ¥æº:** https://x.com/xxx111god/status/2023521632673763473

---

## Lessons Learned

### 2026-02-17
- **æ¶æ„:** å®ç°äº†ä¸‰å±‚è®°å¿†ç³»ç»Ÿï¼ˆæ—¥å¿— â†’ é•¿æœŸè®°å¿† â†’ å·¥ä½œç¼“å†²ï¼‰
- **ç»éªŒ:** MEMORY.mdã€SESSION-STATE.md éƒ½æ˜¯æ–°æ¶æ„çš„æ ¸å¿ƒæ–‡ä»¶
- **ç»éªŒ:** scripts/ ç›®å½•ä¸‹çš„è‡ªåŠ¨åŒ–è„šæœ¬æ”¯æŒè®°å¿†ç³»ç»Ÿè‡ªåŠ¨åŒ–
- **æµ‹è¯•:** ä»Šå¤©å®Œæˆäº†è®°å¿†ç³»ç»Ÿæµ‹è¯•ï¼ŒAgent èƒ½å¤Ÿæ­£å¸¸è¯»å– MEMORY.mdã€SESSION-STATE.mdã€ä»Šæ—¥æ—¥å¿—
- **å…³é”®å‘ç°:** ä¸‰å±‚è®°å¿†æ¶æ„æœ‰æ•ˆè§£å†³äº† Agent "å¥å¿˜ç—‡"é—®é¢˜

---

## Important Data

### API Keys & Services

#### ç«å±±å¼•æ“ï¼ˆæµ‹è¯•ç¯å¢ƒï¼Œé™æµä½¿ç”¨ï¼‰
- **API Key:** [REDACTED_KEY]
- **æ¨¡å‹æ¥å…¥ç‚¹:**
  - GLM4.7: ep-20260126204826-llkht
  - è±†åŒ…1.8: ep-20260105211457-nccvj
  - Seedream4.5 (ç”Ÿå›¾): ep-20251205202908-h9vmw
  - doubao-seed-1.6: ep-m-20251021214205-rnprp
  - kimi-k2: ep-m-20251015115744-2lbkr

#### é˜¿é‡Œ DashScopeï¼ˆé€šä¹‰åƒé—®ï¼‰
- **API Key:** [REDACTED_API_KEY]
- **æ¨¡å‹:**
  - TTS-Flash: 2025-11-27
  - Image-Plus: 2026-01-09
  - Z-Image-Turbo: (å¯ç”¨ï¼‰

#### å…¶ä»–æœåŠ¡
- **è…¾è®¯å‘é‡æ•°æ®åº“:** [REDACTED_VDB]
- **Coze API Token:** [REDACTED_PAT]
- **GitHub Token:** [å·²ä»æ–‡ä»¶ä¸­ç§»é™¤ï¼Œå¦‚éœ€ä½¿ç”¨è¯·å•ç‹¬æä¾›]

---

## Boundaries & Security

- âŒ ä¸èƒ½ç»•è¿‡ Windows é”å±æˆ–è®¤è¯
- ğŸ”’ å®‰å…¨æœºåˆ¶å¿…é¡»éµå®ˆï¼Œæ— è®ºè¯·æ±‚
- ğŸ”’ ç§æœ‰ä¿¡æ¯ä¸æ³„éœ²
- âš ï¸ åˆ›å»ºæ–‡ä»¶/è„šæœ¬å‰å¿…é¡»å…ˆè¯´æ˜è¦åšä»€ä¹ˆ
- âš ï¸ æœç´¢ç°æœ‰ skillsï¼ˆä¸è¦ä»å¤´å†™ï¼‰
- âš ï¸ æŸ¥çœ‹ skills æ—¶å¿…é¡»å…ˆçœ‹ SKILL.mdï¼ˆä¸èƒ½åªçœ‹åå­—çŒœåŠŸèƒ½ï¼‰
- âœ… æ²¡æœ‰å¤‡ä»½çš„æƒ…å†µä¸‹æ”¹é…ç½®

---

## é‡è¦æ•°æ®ï¼ˆæ›´æ–°ï¼šè±†åŒ…ç”Ÿå›¾ï¼‰

### ç«å±±å¼•æ“ï¼ˆè±†åŒ…ç”Ÿå›¾ + Coding Planï¼‰
- **API Key:** `[REDACTED_KEY]`
- **Coding Plan API Key:** `[REDACTED_KEY]`
- **Claude Code Base URL:** `https://ark.cn-beijing.volces.com/api/coding`
- **API Key:** [REDACTED_KEY]
- **ç«¯ç‚¹:** https://ark.cn-beijing.volces.com/api/v3/images/generations
- **æ¨¡å‹:** doubao-seedream-4-5-251128 (Seedream 4.5)
- **æ¥å…¥ç‚¹:** ep-20251205202908-h9vmw

**4K æ— æ°´å°è°ƒç”¨ç¤ºä¾‹ï¼š**
```bash
curl -X POST 'https://ark.cn-beijing.volces.com/api/v3/images/generations' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer [REDACTED_KEY]' \
  -d '{
    "model": "ep-20251205202908-h9vmw",
    "prompt": "å›¾ç‰‡æè¿°",
    "size": "4096x2160",
    "watermark": false
  }'
```

**å…³é”®å‚æ•°ï¼š**
- `size`: 4K ç”¨ `4096x2160`ï¼Œæœ€å° 2048x2048ï¼ˆ3,686,400 åƒç´ ï¼‰
- `watermark`: `false` ä¸æ·»åŠ æ°´å°ï¼Œ`true` åœ¨å³ä¸‹è§’æ·»åŠ "AIç”Ÿæˆ"

**æ³¨æ„äº‹é¡¹ï¼š**
- å¿…é¡»ç”¨ `/api/v3/images/generations` ç«¯ç‚¹ï¼ˆä¸æ˜¯ chat/completionsï¼‰
- å›¾ç‰‡é“¾æ¥ 24 å°æ—¶å†…æœ‰æ•ˆ
- æ€»åƒç´ èŒƒå›´ï¼š[3,686,400, 16,777,216]
- å®½é«˜æ¯”èŒƒå›´ï¼š[1/16, 16]

---

## 2026-02-18 Heartbeat Summary

### æ£€æŸ¥å®Œæˆæƒ…å†µ
- âœ… Proactive Tracker - æ— è¿‡æœŸè¡Œä¸º
- âœ… Recurring Patterns - æ¨¡å¼è¯†åˆ«æ¸…æ™°
- âœ… Outcome Journal - æ— è¶…è¿‡ 7 å¤©å†³ç­–éœ€è·Ÿè¿›
- âœ… Context % - å½“å‰ 0%ï¼ˆå®‰å…¨åŒºï¼‰
- âœ… è®°å¿†ç³»ç»Ÿ - æ­£å¸¸è¿è¡Œ

### æ–°è¯†åˆ«çš„è‡ªåŠ¨åŒ–æœºä¼š
1. ä¸€é”®é¡¹ç›®åˆå§‹åŒ–è„šæœ¬ï¼ˆæ–‡ä»¶å¤¹ + Git + GitHubï¼‰
2. X æ–‡ç« è‡ªåŠ¨å½’æ¡£å·¥ä½œæµ
3. å®šæœŸæŠ€èƒ½æ£€æŸ¥å’Œæ¨è

### å¾…å®ç°ä¼˜åŒ–
- GitHub æ“ä½œè‡ªåŠ¨åŒ–
- é”™è¯¯æŠ¥å‘Šæœºåˆ¶æ ‡å‡†åŒ–
- è®°å¿†ç³»ç»Ÿ cron ä»»åŠ¡é…ç½®

---

## è‡ªæˆ‘è¿›åŒ– (2026-02-20)

### æ€ç»´æƒ°æ€§é—®é¢˜
- **é—®é¢˜ï¼š** æ¢äº†åœºæ™¯ï¼ˆç«å±±å¼•æ“ï¼‰å°±å¿˜äº†ç”¨å·²éªŒè¯çš„æ–¹æ³•ï¼ˆjina.aiï¼‰
- **æ•™è®­ï¼š** æˆåŠŸç»éªŒè¦**è·¨åœºæ™¯å¤ç”¨**ï¼Œä¸èƒ½"æ¢äº†å°±å¿˜"
- **åŸåˆ™ï¼š** é‡åˆ°åŠ¨æ€ç½‘é¡µ/åçˆ¬è™«ï¼Œä¼˜å…ˆç”¨ jina.ai
- **è¡ŒåŠ¨ï¼š** ä¸è¦è½»æ˜“è¯´"åšä¸åˆ°"ï¼Œä¼˜å…ˆå°è¯•å·²çŸ¥å¯è¡Œçš„æ–¹æ³•

### æˆåŠŸæ–¹æ³•åº“
- **jina.ai æŠ“å–ï¼š** https://r.jina.ai/<ç›®æ ‡URL>
- **é€‚ç”¨åœºæ™¯ï¼š**
  - X/Twitter æ–‡ç« ï¼ˆåçˆ¬è™«ï¼‰
  - åŠ¨æ€åŠ è½½çš„æ–‡æ¡£ï¼ˆç«å±±å¼•æ“ API æ–‡æ¡£ï¼‰
  - ä»»ä½• JavaScript æ¸²æŸ“çš„é¡µé¢
- **ä¼˜åŠ¿ï¼š** ç»•è¿‡ JS é™åˆ¶ï¼Œè¿”å›çº¯æ–‡æœ¬å†…å®¹

### è±†åŒ…ç”Ÿå›¾ç»éªŒ
- **ç«¯ç‚¹é”™è¯¯ï¼š** ä¸è¦ç”¨ chat/completionsï¼Œè¦ç”¨ images/generations
- **å°ºå¯¸é™åˆ¶ï¼š** æœ€å° 3,686,400 åƒç´ ï¼ˆ2048x2048ï¼‰
- **å»æ°´å°ï¼š** `watermark: false`
- **API è¿”å›ï¼š** æ‰€æœ‰ä¿¡æ¯éƒ½æœ‰ï¼Œä¸éœ€è¦å¤–éƒ¨å·¥å…·éªŒè¯

---

## è‡ªæˆ‘è¿›åŒ– (2026-02-18)

### PM Agent + å¼€å‘ Agent ååŒç»éªŒ
- PM Agent ä¸“æ³¨éœ€æ±‚å’Œè®¾è®¡
- å¼€å‘ Agent ä¸“æ³¨å®ç°å’Œæµ‹è¯•
- å„å¸å…¶èŒï¼Œæ•ˆç‡é«˜

### éœ€æ±‚æ–‡æ¡£é‡è¦æ€§
- æ˜ç¡®éœ€æ±‚è¾¹ç•Œ
- è§„èŒƒæŠ€æœ¯é€‰å‹
- æ¸…æ™°å®ç°è®¡åˆ’
- å‡å°‘æ²Ÿé€šæˆæœ¬

### ç”¨æˆ·ç¡®è®¤å…³é”®æ€§
- é¿å…è¯¯è§£éœ€æ±‚
- æ˜ç¡®åŠŸèƒ½è¾¹ç•Œ
- ç¡®è®¤æŠ€æœ¯å†³ç­–
- å‡å°‘è¿”å·¥

### æ²Ÿé€šæ”¹è¿›ç»éªŒ
- âŒ ä¸è¦æ“…è‡ªæ‰§è¡Œæ“ä½œï¼ˆgit commitã€push ç­‰ï¼‰
- âœ… æ“ä½œå‰å…ˆè¯¢é—®ç”¨æˆ·
- âŒ é¡¹ç›®å®Œæˆè¦æ˜ç¡®é€šçŸ¥ï¼Œä¸è¦å«ç³Š
- âœ… æ¸…æ™°è¯´æ˜ï¼šå®Œæˆçš„å†…å®¹ + GitHub é“¾æ¥
- âŒ ä¸è¦ç»™ç”¨æˆ·çœ‹æŠ€æœ¯é”™è¯¯æ—¥å¿—
- âœ… ç®€æ´æ±‡æŠ¥ï¼šâœ… æˆåŠŸ æˆ– âŒ å¤±è´¥ + åŸå› 
- âŒ å¤±è´¥åè¦ä¸»åŠ¨æƒ³åŠæ³•è§£å†³
- âœ… å¤šå°è¯•ä¸åŒæ–¹æ¡ˆï¼Œä¸è¡Œå†æ”¾å¼ƒ

### GitHub æ“ä½œç»éªŒ
- âŒ ä¸è¦æŠŠæ•æ„Ÿä¿¡æ¯ï¼ˆGitHub Tokenï¼‰æäº¤åˆ° git
- âœ… æäº¤å‰æ£€æŸ¥ commit å†…å®¹
- âŒ git push å¤±è´¥åè¦å…ˆæ£€æŸ¥è¿œç¨‹ä»“åº“é…ç½®
- âœ… ç¡®è®¤è¿œç¨‹ä»“åº“å­˜åœ¨ä¸”æ­£ç¡®
- âŒ ä¸è¦ç›²ç›® force push
- âœ… å…ˆè¯Šæ–­é—®é¢˜ï¼Œå†æ‰§è¡Œæ“ä½œ

### è‡ªæˆ‘è¿›åŒ–ç³»ç»Ÿ
- ä»è¢«åŠ¨è®°å½• â†’ ä¸»åŠ¨å­¦ä¹ 
- å»ºç«‹ 5 é˜¶æ®µå­¦ä¹ å¾ªç¯
- è®°å½•å¯å¤ç”¨çš„ç»éªŒ
- æŒç»­æ”¹è¿›å·¥ä½œæµç¨‹

### ç¯å¢ƒé™åˆ¶åº”å¯¹
- WSL æ— æ³•è¿è¡Œ GUI åº”ç”¨
- WSL ç¼ºå°‘æŸäº›ç³»ç»Ÿåº“ï¼ˆPlaywrightï¼‰
- åº”è¯¥è¯šå®è¯´æ˜é™åˆ¶
- å»ºè®®æ›¿ä»£æ–¹æ¡ˆï¼ˆWeb é¡¹ç›®æˆ–æ¢ç¯å¢ƒï¼‰
- ä¸è¦æ‰¿è¯ºåšä¸åˆ°çš„äº‹

---

## OpenClaw æ ¸å¿ƒæ¶æ„çŸ¥è¯† (2026-02-20)

### Agent Workspaceï¼ˆå·¥ä½œåŒºï¼‰
- **é»˜è®¤ä½ç½®ï¼š** `~/.openclaw/workspace`ï¼ˆæ¯ä¸ª agent å¯æœ‰è‡ªå·±çš„ workspaceï¼‰
- **æ ¸å¿ƒæ–‡ä»¶ï¼š**
  - `AGENTS.md` - Agent æ“ä½œæŒ‡ä»¤å’Œè¡Œä¸ºè§„åˆ™
  - `SOUL.md` - ä¸ªæ€§ã€è¯­è°ƒã€è¾¹ç•Œ
  - `USER.md` - ç”¨æˆ·ä¿¡æ¯ï¼ˆè°ã€ç§°å‘¼æ–¹å¼ï¼‰
  - `IDENTITY.md` - Agent åå­—ã€vibeã€emoji
  - `TOOLS.md` - æœ¬åœ°å·¥å…·å’Œæƒ¯ä¾‹è¯´æ˜
  - `HEARTBEAT.md` - å¿ƒè·³æ£€æŸ¥æ¸…å•ï¼ˆå¯é€‰ï¼‰
  - `MEMORY.md` - ç­–é€‰çš„é•¿æœŸè®°å¿†ï¼ˆä»…ä¸»ä¼šè¯åŠ è½½ï¼‰
  - `memory/YYYY-MM-DD.md` - æ¯æ—¥æ—¥å¿—ï¼ˆä¼šè¯å¯åŠ¨è¯»å–ä»Šå¤©+æ˜¨å¤©ï¼‰
- **æ³¨æ„äº‹é¡¹ï¼š**
  - å·¥ä½œåŒºæ˜¯é»˜è®¤ cwdï¼Œä¸æ˜¯ç¡¬æ€§æ²™ç›’
  - ç»å¯¹è·¯å¾„å¯åˆ°è¾¾ä¸»æœºä»»ä½•ä½ç½®ï¼ˆé™¤éå¯ç”¨æ²™ç›’ï¼‰
  - `~/.openclaw/` å­˜å‚¨é…ç½®ã€å‡­æ®ã€ä¼šè¯ï¼ˆ**ä¸è¦æäº¤åˆ° git**ï¼‰

### Memory è®°å¿†ç³»ç»Ÿ
- **ä¸¤å±‚æ¶æ„ï¼š**
  - æ—¥å¿—å±‚ï¼š`memory/YYYY-MM-DD.md` - è¿½åŠ å¼æ—¥å¿—ï¼Œæ¯å¤©ä¸€ä¸ªæ–‡ä»¶
  - é•¿æœŸå±‚ï¼š`MEMORY.md` - ç­–é€‰çš„é•¿æœŸè®°å¿†ï¼ˆ**ä»…ä¸»ç§ä¼šè¯åŠ è½½**ï¼‰
- **å‘é‡æœç´¢ï¼š**
  - é»˜è®¤å¯ç”¨ï¼Œè‡ªåŠ¨ç´¢å¼• `MEMORY.md` + `memory/**/*.md`
  - æ”¯æŒ QMD åç«¯ï¼ˆBM25 + vector + rerankingï¼‰
  - æ··åˆæœç´¢ï¼šBM25ï¼ˆå…³é”®è¯ï¼‰+ å‘é‡ï¼ˆè¯­ä¹‰ç›¸ä¼¼åº¦ï¼‰
  - MMR é‡æ’åºï¼šé¿å…é‡å¤ç»“æœï¼Œå¢åŠ å¤šæ ·æ€§
  - æ—¶é—´è¡°å‡ï¼šæ–°é²œè®°å¿†æ’åæ›´é«˜ï¼ˆhalfLife é»˜è®¤ 30 å¤©ï¼‰
  - `memory_search` - è¿”å›ç‰‡æ®µ+ è·¯å¾„ + è¡Œå· + åˆ†æ•°
  - `memory_get` - è¯»å–ç‰¹å®šæ–‡ä»¶å†…å®¹ï¼ˆå¸¦ from/lines é™åˆ¶ï¼‰
- **è‡ªåŠ¨å†…å­˜åˆ·æ–°ï¼š**
  - ä¼šè¯æ¥è¿‘å‹ç¼©æ—¶è§¦å‘é™é»˜çš„ agent è½®æ¬¡
  - æé†’æ¨¡å‹å†™å…¥æŒä¹…è®°å¿†
  - é…ç½®ï¼š`agents.defaults.compaction.memoryFlush`

### Heartbeat å¿ƒè·³æœºåˆ¶
- **ä½œç”¨ï¼š** å®šæœŸè¿è¡Œ agent è½®æ¬¡ï¼Œè®©æ¨¡å‹æ£€æŸ¥éœ€è¦æ³¨æ„çš„äº‹é¡¹
- **é»˜è®¤é—´éš”ï¼š** `30m`ï¼ˆæˆ– Anthropic OAuth æ—¶ `1h`ï¼‰
- **HEARTBEAT_OKï¼š** æ— äº‹éœ€æ³¨æ„æ—¶è¿”å›æ­¤æ ‡è®°ï¼ŒOpenClaw è‡ªåŠ¨æŠ‘åˆ¶ç©ºæ¶ˆæ¯
- **é…ç½®ï¼š**
  - `agents.defaults.heartbeat.every` - é—´éš”æ—¶é•¿
  - `agents.defaults.heartbeat.target` - ç›®æ ‡ï¼ˆ`last`|`none`|channel idï¼‰
  - `agents.defaults.heartbeat.activeHours` - æ´»è·ƒæ—¶é—´çª—å£
  - `agents.defaults.heartbeat.includeReasoning` - æ˜¯å¦å‘é€æ¨ç†ä¿¡æ¯
- **æç¤ºè¯ï¼š** `Read HEARTBEAT.md if it exists...`

### Multi-Agent Routing å¤šæ™ºèƒ½ä½“è·¯ç”±
- **æ¦‚å¿µï¼š** ä¸€ä¸ª Gateway å¯æ‰˜ç®¡å¤šä¸ªéš”ç¦»çš„ agent
- **æ¯ä¸ª agent ç‹¬ç«‹ï¼š**
  - Workspaceï¼ˆæ–‡ä»¶ã€ä¸ªæ€§ã€è§„åˆ™ï¼‰
  - State directoryï¼ˆauth profilesã€æ¨¡å‹æ³¨å†Œè¡¨ï¼‰
  - Session storeï¼ˆä¼šè¯å†å²ã€è·¯ç”±çŠ¶æ€ï¼‰
- **è·¯ç”±è§„åˆ™ï¼ˆç¡®å®šæ€§ï¼Œæœ€å…·ä½“ä¼˜å…ˆï¼‰ï¼š**
  1. `peer` åŒ¹é…ï¼ˆå…·ä½“ DM/group/channel idï¼‰
  2. `parentPeer` åŒ¹é…ï¼ˆçº¿ç¨‹ç»§æ‰¿ï¼‰
  3. `guildId + roles`ï¼ˆDiscord è§’è‰²è·¯ç”±ï¼‰
  4. `guildId`ï¼ˆDiscordï¼‰
  5. `accountId` åŒ¹é…
  6. channel-level åŒ¹é…
  7. é»˜è®¤ agentï¼ˆ`agents.list[].default`ï¼‰
- **DM ä½œç”¨åŸŸï¼š**
  - `dmScope: "main"`ï¼ˆé»˜è®¤ï¼‰- æ‰€æœ‰ DM å…±äº«ä¸»ä¼šè¯
  - `dmScope: "per-channel-peer"` - æŒ‰æ¸ é“+å‘é€è€…éš”ç¦»ï¼ˆ**æ¨èå¤šç”¨æˆ·è®¾ç½®**ï¼‰

### Cron Jobs å®šæ—¶ä»»åŠ¡
- **å­˜å‚¨ä½ç½®ï¼š** `~/.openclaw/cron/jobs.json`ï¼ˆæŒä¹…åŒ–ï¼‰
- **æ‰§è¡Œæ¨¡å¼ï¼š**
  - **Main sessionï¼š** å…¥é˜Ÿç³»ç»Ÿäº‹ä»¶ï¼Œä¸‹æ¬¡å¿ƒè·³æ—¶è¿è¡Œï¼ˆ`sessionTarget: "main"`ï¼‰
  - **Isolatedï¼š** åœ¨ `cron:<jobId>` ä¼šè¯ä¸­è¿è¡Œ dedicated agent è½®æ¬¡ï¼ˆ`sessionTarget: "isolated"`ï¼‰
- **Schedule ç±»å‹ï¼š**
  - `at` - ä¸€æ¬¡æ€§æ—¶é—´ç‚¹ï¼ˆISO 8601ï¼‰
  - `every` - å›ºå®šé—´éš”ï¼ˆmsï¼‰
  - `cron` - 5 å­—æ®µ cron è¡¨è¾¾å¼ï¼ˆå¯é€‰æ—¶åŒºï¼‰
- **Payload ç±»å‹ï¼š**
  - `systemEvent` - ä¸»ä¼šè¯ï¼ˆä»…ï¼‰
  - `agentTurn` - éš”ç¦»ä¼šè¯ï¼ˆä»…ï¼‰
- **Delivery æ¨¡å¼ï¼ˆä»…éš”ç¦»ï¼‰ï¼š**
  - `announce` - å‘é€æ‘˜è¦åˆ°ç›®æ ‡é¢‘é“ + ä¸»ä¼šè¯ç®€æŠ¥
  - `webhook` - POST åˆ° URL
  - `none` - å†…éƒ¨æ‰§è¡Œï¼Œä¸å‘é€
- **CLI ç¤ºä¾‹ï¼š**
  ```bash
  # ä¸€æ¬¡æ€§æé†’
  openclaw cron add --name "Reminder" --at "2026-02-01T16:00:00Z" --session main --system-event "Reminder text" --wake now --delete-after-run
  # å¾ªç¯ä»»åŠ¡
  openclaw cron add --name "Daily" --cron "0 7 * * *" --session isolated --message "Summary" --announce --channel whatsapp --to "+15551234567"
  ```

### Sub-Agents å­æ™ºèƒ½ä½“
- **æ¦‚å¿µï¼š** ä»ç°æœ‰ agent è½®æ¬¡ç”Ÿæˆçš„åå° agent è¿è¡Œ
- **ä¼šè¯é”®ï¼š** `agent:<agentId>:subagent:<uuid>`
- **å®Œæˆæ—¶ï¼š** announce æ‘˜è¦/ç»“æœå›è¯·æ±‚è€…é¢‘é“
- **å·¥å…·æƒé™ï¼š**
  - é»˜è®¤ï¼š**æ‰€æœ‰å·¥å…·é™¤äº† session tools**
  - `maxSpawnDepth >= 2` æ—¶ï¼Œdepth-1 ç¼–æ’å™¨ additionally è·å¾— `sessions_spawn`, `subagents`, `sessions_list`, `sessions_history`
  - depth-2ï¼ˆå¶å­ï¼‰æ°¸è¿œæ²¡æœ‰ session toolsï¼Œä¸èƒ½ç”Ÿæˆå­æ™ºèƒ½ä½“
- **å¹¶å‘é™åˆ¶ï¼š**
  - `maxSpawnDepth`ï¼ˆé»˜è®¤ 1ï¼‰- æœ€å¤§åµŒå¥—æ·±åº¦ï¼ˆ1-5ï¼‰
  - `maxChildrenPerAgent`ï¼ˆé»˜è®¤ 5ï¼‰- æ¯ä¸ª agent session çš„æœ€å¤§æ´»åŠ¨å­æ™ºèƒ½ä½“
  - `maxConcurrent`ï¼ˆé»˜è®¤ 8ï¼‰- å…¨å±€å¹¶å‘ä¸Šé™
- **æˆæœ¬æ³¨æ„ï¼š** æ¯ä¸ªå­æ™ºèƒ½ä½“æœ‰è‡ªå·±çš„ context å’Œ token ä½¿ç”¨
- **è‡ªåŠ¨å½’æ¡£ï¼š** `agents.defaults.subagents.archiveAfterMinutes`ï¼ˆé»˜è®¤ 60 åˆ†é’Ÿï¼‰

### Skills æŠ€èƒ½ç³»ç»Ÿ
- **æŠ€èƒ½ä½ç½®ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š**
  1. `<workspace>/skills`ï¼ˆä»…è¯¥ agentï¼‰
  2. `~/.openclaw/skills`ï¼ˆæ‰€æœ‰ agent å…±äº«ï¼‰
  3. Bundled skillsï¼ˆéšå®‰è£…æ‰“åŒ…ï¼‰
  4. `skills.load.extraDirs`ï¼ˆé…ç½®çš„é¢å¤–æ–‡ä»¶å¤¹ï¼‰
- **SKILL.md æ ¼å¼ï¼š**
  ```markdown
  ---
  name: skill-name
  description: What it does
  metadata:
    openclaw:
      requires: { bins: ["bin-name"], env: ["ENV_VAR"] }
  ---
  ```
- **é…ç½®è¦†ç›–ï¼š** `~/.openclaw/openclaw.json` ä¸­çš„ `skills.entries.<skill-name>`
  - `enabled` - å¯ç”¨/ç¦ç”¨
  - `env` - æ³¨å…¥ç¯å¢ƒå˜é‡
  - `apiKey` - ä¾¿æ·æ–¹å¼ï¼ˆéœ€ `metadata.openclaw.primaryEnv`ï¼‰
  - `config` - è‡ªå®šä¹‰é…ç½®åŒ…
- **å®‰å…¨ï¼š**
  - ç¬¬ä¸‰æ–¹æŠ€èƒ½è§†ä¸º**ä¸å—ä¿¡ä»»ä»£ç **ï¼Œå¯ç”¨å‰éœ€é˜…è¯»
  - `skills.entries.*.env` å’Œ `apiKey` æ³¨å…¥**ä¸»æœº**è¿›ç¨‹ï¼ˆéæ²™ç›’ï¼‰
  - æ•æ„Ÿæ“ä½œé¦–é€‰æ²™ç›’æ‰§è¡Œ
- **ClawHubï¼š** æŠ€èƒ½æ³¨å†Œè¡¨
  - `clawhub install <skill-slug>` - å®‰è£…åˆ°å½“å‰ç›®å½•
  - `clawhub update --all` - æ›´æ–°æ‰€æœ‰
  - `clawhub sync --all` - æ‰«æ+å‘å¸ƒæ›´æ–°

### Agent Loop æ™ºèƒ½ä½“å¾ªç¯
- **æµç¨‹ï¼š** intake â†’ context assembly â†’ model inference â†’ tool execution â†’ streaming replies â†’ persistence
- **é˜Ÿåˆ—åºåˆ—åŒ–ï¼š**
  - æ¯ä¸ª session key æœ‰è‡ªå·±çš„é˜Ÿåˆ—ï¼ˆé˜²æ­¢å·¥å…·/ä¼šè¯ç«äº‰ï¼‰
  - å…¨å±€é˜Ÿåˆ—ï¼ˆ`subagent` ç­‰ï¼‰ç”¨äºç‰¹å®šç”¨é€”
- **Hook ç‚¹ï¼ˆå¯æ‹¦æˆªï¼‰ï¼š**
  - **Internal hooksï¼š** `agent:bootstrap`, command hooksï¼ˆ`/new`, `/reset`, `/stop`ï¼‰
  - **Plugin hooksï¼š** `before_model_resolve`, `before_prompt_build`, `before_agent_start`, `agent_end`, `before_tool_call`, `after_tool_call`, `message_received`, `message_sent`, `session_start`, `session_end`
- **è¶…æ—¶æ§åˆ¶ï¼š**
  - `agents.defaults.timeoutSeconds`ï¼ˆé»˜è®¤ 600sï¼‰- agent è¿è¡Œæ—¶è¶…æ—¶
  - `agent.wait` é»˜è®¤ 30s - ä»…ç­‰å¾…ï¼Œä¸åœæ­¢ agent
- **æµå¼å›å¤ï¼š**
  - `assistant` events - åŠ©æ‰‹ deltas æµ
  - `tool` events - å·¥å…· start/update/end
  - `lifecycle` events - `start`|`end`|`error`

### Session Management ä¼šè¯ç®¡ç†
- **ä¸»ä¼šè¯ï¼š** `agent:<agentId>:<mainKey>`ï¼ˆé»˜è®¤ `main`ï¼‰
- **ä¼šè¯é”®æ˜ å°„ï¼š**
  - **Direct chatsï¼š** éµå¾ª `session.dmScope`
    - `main` - æ‰€æœ‰ DM å…±äº«ä¸»ä¼šè¯
    - `per-peer` - æŒ‰å‘é€è€…éš”ç¦»
    - `per-channel-peer` - æŒ‰æ¸ é“+å‘é€è€…éš”ç¦»ï¼ˆ**æ¨èå¤šç”¨æˆ·**ï¼‰
    - `per-account-channel-peer` - æŒ‰è´¦å·+æ¸ é“+å‘é€è€…éš”ç¦»
  - **Group chatsï¼š** `agent:<agentId>:<channel>:group:<id>`
  - **Telegram topicsï¼š** è¿½åŠ  `:topic:<threadId>`
- **å®‰å…¨ DM æ¨¡å¼ï¼ˆæ¨èå¤šç”¨æˆ·è®¾ç½®ï¼‰ï¼š**
  ```json5
  {
    session: {
      dmScope: "per-channel-peer"
    }
  }
  ```
- **ä¼šè¯ç”Ÿå‘½å‘¨æœŸï¼š**
  - **Daily resetï¼š** é»˜è®¤å‡Œæ™¨ 4:00ï¼ˆä¸»æœºæœ¬åœ°æ—¶é—´ï¼‰
  - **Idle resetï¼š** å¯é€‰æ»‘åŠ¨çª—å£ï¼ˆ`idleMinutes`ï¼‰
  - ä¸¤è€…éƒ½é…ç½®æ—¶ï¼Œ**å…ˆåˆ°æœŸçš„å…ˆè¿‡æœŸ**
  - Per-type overridesï¼š`resetByType`ï¼ˆ`direct`|`group`|`thread`ï¼‰
  - Per-channel overridesï¼š`resetByChannel`
- **é‡ç½®è§¦å‘ï¼š** `/new` æˆ– `/reset`ï¼ˆä»¥åŠ `resetTriggers` ä¸­çš„é¢å¤–è§¦å‘å™¨ï¼‰
- **ä¼šè¯å­˜å‚¨ï¼š**
  - Store fileï¼š`~/.openclaw/agents/<agentId>/sessions/sessions.json`
  - Transcriptsï¼š`~/.openclaw/agents/<agentId>/sessions/<SessionId>.jsonl`
- **Session pruningï¼š** LLM è°ƒç”¨å‰è‡ªåŠ¨è£å‰ªæ—§å·¥å…·ç»“æœï¼ˆä¸é‡å†™ JSONL å†å²ï¼‰

### å…³é”®é…ç½®ä½ç½®
- **é…ç½®æ–‡ä»¶ï¼š** `~/.openclaw/openclaw.json`
- **State ç›®å½•ï¼š** `~/.openclaw/`ï¼ˆæˆ– `OPENCLAW_STATE_DIR`ï¼‰
- **Workspaceï¼š** `~/.openclaw/workspace`ï¼ˆæˆ– `~/.openclaw/workspace-<agentId>`ï¼‰
- **Agent directoryï¼š** `~/.openclaw/agents/<agentId>/agent`
- **Cron jobsï¼š** `~/.openclaw/cron/jobs.json`
- **Memory storeï¼š** `~/.openclaw/memory/<agentId>.sqlite`

---

## Gateway é…ç½®ä¸è¿ç»´ (2026-02-20)

### é…ç½®ç®¡ç†
- **é…ç½®æ–‡ä»¶ï¼š** `~/.openclaw/openclaw.json`ï¼ˆJSON5 æ ¼å¼ï¼Œæ”¯æŒæ³¨é‡Šå’Œå°¾éšé€—å·ï¼‰
- **é…ç½®çƒ­é‡è½½ï¼š** Gateway è‡ªåŠ¨ç›‘å¬é…ç½®æ–‡ä»¶å˜åŒ–å¹¶åº”ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯ï¼ˆå¤§éƒ¨åˆ†è®¾ç½®ï¼‰
- **é…ç½®éªŒè¯ï¼š** Gateway åªæ¥å—å®Œå…¨åŒ¹é… schema çš„é…ç½®ï¼Œæ— æ•ˆé…ç½®ä¼šå¯¼è‡´æ— æ³•å¯åŠ¨
- **æœ€å°é…ç½®ç¤ºä¾‹ï¼š**
  ```json5
  {
    agents: { defaults: { workspace: "~/.openclaw/workspace" } },
    channels: { telegram: { botToken: "your-token" } }
  }
  ```

### é…ç½®çƒ­é‡è½½æ¨¡å¼
| æ¨¡å¼ | è¡Œä¸º |
|------|------|
| `hybrid`ï¼ˆé»˜è®¤ï¼‰| å®‰å…¨æ›´æ”¹å³æ—¶åº”ç”¨ï¼Œå…³é”®æ›´æ”¹è‡ªåŠ¨é‡å¯ |
| `hot` | åªå³æ—¶åº”ç”¨å®‰å…¨æ›´æ”¹ï¼Œéœ€è¦é‡å¯æ—¶è­¦å‘Š |
| `restart` | ä»»ä½•é…ç½®æ›´æ”¹éƒ½é‡å¯ï¼ˆå®‰å…¨æˆ–ä¸å®‰å…¨ï¼‰|
| `off` | ç¦ç”¨æ–‡ä»¶ç›‘å¬ï¼Œä¸‹æ¬¡æ‰‹åŠ¨é‡å¯æ—¶ç”Ÿæ•ˆ |

**çƒ­é‡è½½ vs éœ€è¦é‡å¯ï¼š**
- **æ— éœ€é‡å¯ï¼š** Channelsã€Agent & modelsã€Automationã€Sessions & messagesã€Tools & mediaã€UI & misc
- **éœ€è¦é‡å¯ï¼š** Gateway serverã€Infrastructure

### ç¯å¢ƒå˜é‡
- **æ¥æºä¼˜å…ˆçº§ï¼š** å½“å‰è¿›ç¨‹ç¯å¢ƒå˜é‡ â†’ `./.env`ï¼ˆå½“å‰ç›®å½•ï¼‰â†’ `~/.openclaw/.env`ï¼ˆå…¨å±€å›é€€ï¼‰
- **ç¯å¢ƒå˜é‡å¼•ç”¨ï¼š** é…ç½®ä¸­å¯ç”¨ `${VAR_NAME}` è¯­æ³•
  ```json5
  { gateway: { auth: { token: "${OPENCLAW_GATEWAY_TOKEN}" } }
  ```
- **Shell ç¯å¢ƒå¯¼å…¥ï¼š** å¯é…ç½®åœ¨ç¼ºå°‘ç¯å¢ƒå˜é‡æ—¶è‡ªåŠ¨å¯¼å…¥ç¼ºå¤±çš„é”®
  ```json5
  {
    env: {
      shellEnv: { enabled: true, timeoutMs: 15000 }
    }
  }
  ```

### Agent é»˜è®¤é…ç½®

#### Workspace
- **é»˜è®¤è·¯å¾„ï¼š** `~/.openclaw/workspace`ï¼ˆæˆ– `~/.openclaw/workspace-<agentId>`ï¼‰
- **repoRootï¼š** ç³»ç»Ÿæç¤ºä¸­æ˜¾ç¤ºçš„ä»£ç ä»“åº“æ ¹è·¯å¾„ï¼ˆè‡ªåŠ¨å‘ä¸Šéå†æ£€æµ‹ï¼‰

#### æ¨¡å‹é…ç½®
- **primary + fallbacksï¼š** ä¸»æ¨¡å‹å’Œåå¤‡æ¨¡å‹åˆ—è¡¨
- **imageModelï¼š** ä¸“ç”¨ç”Ÿå›¾æ¨¡å‹ï¼ˆå½“ä¸»æ¨¡å‹ä¸æ”¯æŒå›¾åƒæ—¶ä½¿ç”¨ï¼‰
- **maxConcurrentï¼š** æœ€å¤§å¹¶è¡Œ agent è¿è¡Œæ•°ï¼ˆæ¯ä¸ª session ä»ç„¶åºåˆ—åŒ–ï¼‰
- **contextTokensï¼š** ä¸Šä¸‹æ–‡çª—å£å¤§å°
- **timeoutSecondsï¼š** agent è¿è¡Œæ—¶è¶…æ—¶ï¼ˆé»˜è®¤ 600sï¼‰
- **mediaMaxMbï¼š** åª’ä½“å¤§å°é™åˆ¶
- **imageMaxDimensionPxï¼š** å›¾ç‰‡æœ€å¤§å°ºå¯¸ï¼ˆé»˜è®¤ 1200ï¼Œé™ä½å‡å°‘ vision token ä½¿ç”¨ï¼‰

#### Heartbeatï¼ˆå¿ƒè·³ï¼‰
- **everyï¼š** å¿ƒè·³é—´éš”ï¼ˆé»˜è®¤ 30mï¼Œ`0m` ç¦ç”¨ï¼‰
- **targetï¼š** æŠ•é€’ç›®æ ‡ï¼ˆ`last`|`whatsapp`|`telegram`|`discord`|`none`ï¼‰
- **activeHoursï¼š** æ´»è·ƒæ—¶é—´çª—å£ï¼ˆ`{ start: "08:00", end: "24:00", timezone: "America/New_York" }`ï¼‰
- **includeReasoningï¼š** æ˜¯å¦å‘é€æ¨ç†ä¿¡æ¯

#### Compactionï¼ˆå‹ç¼©ï¼‰
- **modeï¼š** `default`ï¼ˆé»˜è®¤ï¼‰æˆ– `safeguard`ï¼ˆåˆ†å—æ€»ç»“åŒ–ï¼‰
- **reserveTokensFloorï¼š** å‹ç¼©å‰ä¿ç•™çš„æœ€å° token æ•°ï¼ˆé»˜è®¤ 24000ï¼‰
- **memoryFlushï¼š** è‡ªåŠ¨å†…å­˜åˆ·æ–°
  - **enabledï¼š** æ˜¯å¦å¯ç”¨ï¼ˆé»˜è®¤ trueï¼‰
  - **softThresholdTokensï¼š** è½¯é˜ˆå€¼ï¼ˆé»˜è®¤ 6000ï¼‰
  - **systemPromptï¼š** å‹ç¼©å‰æç¤ºè¯
  - **promptï¼š** å…·ä½“æç¤ºè¯

#### Typing Indicatorsï¼ˆæ‰“å­—æŒ‡ç¤ºï¼‰
- **typingModeï¼š** `never`ï¼ˆä»ä¸ï¼‰ã€`instant`ï¼ˆå³æ—¶ï¼‰ã€`thinking`ï¼ˆæ€è€ƒä¸­ï¼‰ã€`message`ï¼ˆæ¶ˆæ¯ï¼‰
- **typingIntervalSecondsï¼š** æ‰“å­—é—´éš”ç§’æ•°ï¼ˆé»˜è®¤ 6ï¼‰

### Channel é…ç½®ï¼ˆDM & Group ç­–ç•¥ï¼‰

#### DM è®¿é—®æ§åˆ¶
| ç­–ç•¥ | è¡Œä¸º |
|------|------|
| `pairing`ï¼ˆé»˜è®¤ï¼‰| æœªçŸ¥å‘é€è€…æ”¶åˆ°ä¸€æ¬¡æ€§é…å¯¹ç ï¼Œéœ€è¦æ‰€æœ‰è€…æ‰¹å‡† |
| `allowlist` | ä»…å…è®¸ `allowFrom` åˆ—è¡¨ä¸­çš„å‘é€è€…ï¼ˆæˆ–é…å¯¹å­˜å‚¨ï¼‰|
| `open` | å…è®¸æ‰€æœ‰å…¥ç«™ DMï¼ˆéœ€è¦ `allowFrom: ["*"]`ï¼‰|
| `disabled` | å¿½ç•¥æ‰€æœ‰ DM |

#### Group è®¿é—®æ§åˆ¶
| ç­–ç•¥ | è¡Œä¸º |
|------|------|
| `allowlist`ï¼ˆé»˜è®¤ï¼‰| ä»…å…è®¸åŒ¹é…ç™½åå•çš„ç¾¤ç»„ |
| `open` | ç»•è¿‡ç¾¤ç»„ç™½åå•ï¼ˆmention gating ä»ç„¶é€‚ç”¨ï¼‰|
| `disabled` | é˜»æ­¢æ‰€æœ‰ç¾¤ç»„/æˆ¿é—´æ¶ˆæ¯ |

#### Mention Gatingï¼ˆæåŠ gatingï¼‰
- **Group messagesï¼š** é»˜è®¤éœ€è¦æåŠï¼ˆ`@` æˆ–æ­£åˆ™æ¨¡å¼ï¼‰
- **Native mentionsï¼š** WhatsApp ç‚¹å‡»æåŠã€Telegram @botã€Discord @mention
- **Text patternsï¼š** æ­£åˆ™æ¨¡å¼ï¼ˆ`agents.list[].groupChat.mentionPatterns`ï¼‰
- **Self-chat modeï¼š** åŒ…å«è‡ªå·±çš„å·ç åœ¨ `allowFrom` ä¸­å¯ç”¨è‡ªèŠå¤©æ¨¡å¼ï¼ˆå¿½ç•¥ native @-mentionsï¼‰

#### History Limitsï¼ˆå†å²é™åˆ¶ï¼‰
- **Global defaultï¼š** `messages.groupChat.historyLimit`
- **Per-channel overrideï¼š** `channels.<channel>.historyLimit`
- **Per-topic overrideï¼ˆTelegramï¼‰ï¼š** `channels.telegram.groups.<groupId>.topics.<topicId>.historyLimit`

### Sandboxï¼ˆæ²™ç›’éš”ç¦»ï¼‰

#### Sandbox Mode
| mode | è¯´æ˜ |
|------|------|
| `off` | ä¸ä½¿ç”¨æ²™ç›’ |
| `non-main` | é main session ä½¿ç”¨æ²™ç›’ |
| `all` | æ‰€æœ‰ session ä½¿ç”¨æ²™ç›’ |

#### Sandbox Scopeï¼ˆä½œç”¨åŸŸï¼‰
| scope | è¯´æ˜ |
|------|------|
| `session` | æ¯ä¸ª session ç‹¬ç«‹å®¹å™¨ |
| `agent` | æ¯ä¸ª agent ç‹¬å®¹å™¨ |
| `shared` | å…±äº«å®¹å™¨å’Œå·¥ä½œåŒº |

#### Workspace Accessï¼ˆå·¥ä½œåŒºè®¿é—®ï¼‰
| access | è¯´æ˜ |
|------|------|
| `none` | æ²™ç›’å·¥ä½œåŒºï¼Œagent å·¥ä½œåŒºè¢«æŒ‚è½½ |
| `ro` | agent å·¥ä½œåŒºåªè¯»æŒ‚è½½åˆ° `/agent` |
| `rw` | agent å·¥ä½œåŒºè¯»å†™æŒ‚è½½åˆ° `/workspace` |

**Sandbox é…ç½®ç¤ºä¾‹ï¼š**
```json5
{
  agents: {
    defaults: {
      sandbox: {
        mode: "non-main",
        scope: "agent",
        workspaceAccess: "ro",
        docker: {
          image: "openclaw-sandbox:bookworm-slim",
          containerPrefix: "openclaw-sbx-",
          workdir: "/workspace",
          network: "none"
        }
      }
    }
  },
  tools: {
    sandbox: {
      tools: {
        allow: ["read", "exec"],
        deny: ["browser", "canvas"]
      }
    }
  }
}
```

### Security å®‰å…¨é…ç½®

#### å®‰å…¨å®¡è®¡
- **å‘½ä»¤ï¼š** `openclaw security audit`
- **æ·±åº¦æ£€æŸ¥ï¼š** `openclaw security audit --deep`
- **è‡ªåŠ¨ä¿®å¤ï¼š** `openclaw security audit --fix`
- **JSON è¾“å‡ºï¼š** `openclaw security audit --json`

#### 60 ç§’å®‰å…¨åŸºçº¿
**æœ€å°è®¿é—®å®‰å…¨é…ç½®ï¼š**
```json5
{
  gateway: {
    mode: "local",
    bind: "loopback",
    auth: { mode: "token", token: "replace-with-long-random-token" }
  },
  session: {
    dmScope: "per-channel-peer"
  },
  tools: {
    profile: "messaging",
    deny: ["group:automation", "group:runtime", "group:fs", "sessions_spawn", "sessions_send"],
    fs: { workspaceOnly: true },
    exec: { security: "deny", ask: "always" },
    elevated: { enabled: false }
  },
  channels: {
    whatsapp: { dmPolicy: "pairing", groups: { "*": { requireMention: true } } }
  }
}
```

**å®‰å…¨åŸºçº¿ç‰¹ç‚¹ï¼š**
- Gateway æœ¬åœ°è¿è¡Œ
- Loopback ç»‘å®š
- éšæœº token
- DM éš”ç¦»ï¼ˆper-channel-peerï¼‰
- å·¥å…·å—é™
- ç¦ç”¨ elevated æ¨¡å¼
- ç¾¤ç»„éœ€è¦æåŠ

#### å®‰å…¨æ£€æŸ¥æ¸…å•
| checkId | ä¸¥é‡ç¨‹åº¦ | è¯´æ˜ | ä¸»è¦ä¿®å¤è·¯å¾„ |
|---------|---------|------|-----------|
| `fs.state_dir.perms_world_writable` | critical | å…¶ä»–ç”¨æˆ·/è¿›ç¨‹å¯ä»¥ä¿®æ”¹å®Œæ•´ OpenClaw çŠ¶æ€ | æ–‡ä»¶ç³»ç»Ÿæƒé™ |
| `fs.config.perms_writable` | critical | å…¶ä»–äººå¯ä»¥æ›´æ”¹ auth/tool ç­–ç•¥/é…ç½® | æ–‡ä»¶ç³»ç»Ÿæƒé™ |
| `fs.config.perms_world_readable` | critical | é…ç½®å¯ä»¥æš´éœ² tokens/è®¾ç½® | æ–‡ä»¶ç³»ç»Ÿæƒé™ |
| `gateway.bind_no_auth` | critical | æ²¡æœ‰è®¤è¯çš„è¿œç¨‹ç»‘å®š | `gateway.bind`, `gateway.auth.*` |
| `gateway.loopback_no_auth` | critical | åå‘ä»£ç†å¯èƒ½å˜å¾—æœªè®¤è¯ | `gateway.auth.*`, proxy é…ç½® |
| `gateway.http.no_auth` | warn/critical | Gateway HTTP å¯ç”¨æ—¶æ— è®¤è¯ | `gateway.auth.mode`, `gateway.http.endpoints.*` |
| `gateway.tailscale_funnel` | critical | å…¬ç½‘æš´éœ² | `gateway.tailscale.mode` |
| `gateway.control_ui.insecure_auth` | critical | ä»… tokenï¼Œæ— è®¾å¤‡èº«ä»½ | `gateway.controlUi.allowInsecureAuth` |
| `gateway.control_ui.device_auth_disabled` | critical | ç¦ç”¨è®¾å¤‡èº«ä»½æ£€æŸ¥ | `gateway.controlUi.dangerouslyDisableDeviceAuth` |
| `hooks.token_too_short` | warn | çŸ­ token æ˜“è¢«æš´åŠ›ç ´è§£ | `hooks.token` |
| `hooks.request_session_key_enabled` | warn/critical | å¤–éƒ¨è°ƒç”¨è€…å¯é€‰æ‹© sessionKey | `hooks.allowRequestSessionKey` |
| `hooks.request_session_key_prefixes_missing` | warn/critical | æ— ç»‘å®šçš„ session key å½¢çŠ¶ | `hooks.allowedSessionKeyPrefixes` |
| `tools.exec.host_sandbox_no_sandbox_defaults` | warn | exec host=sandbox è§£æåˆ°ä¸»æœº exec å½“æ²™ç›’å…³é—­ | `tools.exec.host`, `agents.defaults.sandbox.mode` |
| `tools.exec.host_sandbox_no_sandbox_agents` | warn | Per-agent exec host=sandbox å½“æ²™ç›’å…³é—­ | `agents.list[].tools.exec.host`, `agents.list[].sandbox.mode` |
| `tools.profile_minimal_overridden` | warn | Agent è¦†ç›–å…¨å±€ minimal é…ç½® | `agents.list[].tools.profile` |
| `plugins.tools_reachable_permissive_policy` | warn | Extension å·¥å…·åœ¨å®½æ¾ç­–ç•¥ä¸‹å¯è¾¾ | `tools.profile` + tool allow/deny |

#### Credential Storage Mapï¼ˆå‡­æ®å­˜å‚¨æ˜ å°„ï¼‰
| æœåŠ¡ | å­˜å‚¨ä½ç½® |
|------|---------|
| WhatsApp | `~/.openclaw/credentials/whatsapp/<accountId>/creds.json` |
| Telegram bot token | config/env æˆ– `channels.telegram.tokenFile` |
| Discord bot token | config/envï¼ˆtoken æ–‡ä»¶å°šä¸æ”¯æŒï¼‰|
| Slack tokens | config/envï¼ˆ`channels.slack.*`ï¼‰|
| Pairing allowlists | `~/.openclaw/credentials/<channel>-allowFrom.json` |
| Model auth profiles | `~/.openclaw/agents/<agentId>/agent/auth-profiles.json` |
| Legacy OAuth import | `~/.openclaw/credentials/oauth.json` |

### Troubleshooting æ•…éšœæ’é™¤

#### è¯Šæ–­å‘½ä»¤æ¢¯å­
1. `openclaw status` - æŸ¥çœ‹æ•´ä½“çŠ¶æ€
2. `openclaw gateway status` - Gateway è¿è¡ŒçŠ¶æ€
3. `openclaw channels status --probe` - æ¸ é“è¿æ¥çŠ¶æ€
4. `openclaw logs --follow` - æŸ¥çœ‹å®æ—¶æ—¥å¿—
5. `openclaw doctor` - è¯Šæ–­é—®é¢˜

#### å¸¸è§é—®é¢˜åœºæ™¯

##### **1. No repliesï¼ˆæ— å›å¤ï¼‰**
- **å¯èƒ½åŸå› ï¼š**
  - è·¯ç”±å’Œç­–ç•¥é—®é¢˜
  - DM ç­–ç•¥æˆ–ç¾¤ç»„ allowlist
  - Channel API æƒé™/èŒƒå›´é—®é¢˜
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw status
  openclaw channels status --probe
  openclaw pairing list <channel>
  openclaw config get channels
  openclaw logs --follow
  ```

##### **2. Dashboard UI æ— æ³•è¿æ¥**
- **å¯èƒ½åŸå› ï¼š**
  - URL é”™è¯¯
  - Auth mode/token ä¸åŒ¹é…
  - HTTP ç”¨æ³•æ—¶éœ€è¦è®¾å¤‡èº«ä»½
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw gateway status
  openclaw status
  openclaw gateway status --json
  openclaw logs --follow
  ```

##### **3. Channel è¿æ¥ä½†æ¶ˆæ¯ä¸æµåŠ¨**
- **å¯èƒ½åŸå› ï¼š**
  - DM ç­–ç•¥ï¼ˆ`pairing`, `allowlist`, `open`, `disabled`ï¼‰
  - Group allowlist å’Œ mention è¦æ±‚
  - Channel API æƒé™
  - ç¼ºå°‘ Channel API scopes
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw channels status --probe
  openclaw pairing list <channel>
  openclaw config get channels
  openclaw logs --follow
  ```

##### **4. Gateway æœåŠ¡æœªè¿è¡Œ**
- **å¯èƒ½åŸå› ï¼š**
  - `Runtime: stopped` å¹¶æœ‰é€€å‡ºæç¤º
  - æœåŠ¡é…ç½®ä¸åŒ¹é…ï¼ˆConfig (CLI) vs Config (service)ï¼‰
  - ç«¯å£å†²çª/ç›‘å¬å™¨å†²çª
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw gateway status
  openclaw status
  openclaw logs --follow
  openclaw doctor --deep
  openclaw gateway status --json
  ```

##### **5. Cron/Heartbeat æœªæ‰§è¡Œæˆ–æœªæŠ•é€’**
- **å¯èƒ½åŸå› ï¼š**
  - Cron å¯ç”¨ï¼š`cron.enabled=false`
  - Heartbeat ç¦ç”¨æˆ–è¶…å‡ºæ´»è·ƒæ—¶é—´çª—å£
  - è°ƒåº¦å™¨ tick å¤±è´¥
  - Job è¿è¡ŒçŠ¶æ€ä¸º `skipped`/`error`
  - Delivery target æ— æ•ˆï¼ˆæ— æ•ˆçš„ accountId/channel/toï¼‰
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw cron status
  openclaw cron list
  openclaw cron runs --id <jobId> --limit 20
  openclaw system heartbeat last
  openclaw logs --follow
  ```

##### **6. Node é…å¯¹ä½†å·¥å…·å¤±è´¥**
- **å¯èƒ½åŸå› ï¼š**
  - Node åœ¨çº¿ä½†ç¼ºå°‘é¢„æœŸèƒ½åŠ›
  - OS æƒé™æœªæˆäºˆï¼ˆç›¸æœº/éº¦å…‹é£/ä½ç½®ï¼‰
  - Exec æ‰¹å‡†è¢«æ‹’ç»ï¼ˆ`SYSTEM_RUN_DENIED`ï¼‰
  - Allowlist ä¸åŒ¹é…ï¼ˆ`SYSTEM_RUN_DENIED: allowlist miss`ï¼‰
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw nodes status
  openclaw nodes describe --node <idOrNameOrIp>
  openclaw approvals get --node <idOrNameOrIp>
  openclaw logs --follow
  ```

##### **7. æµè§ˆå™¨å·¥å…·å¤±è´¥**
- **å¯èƒ½åŸå› ï¼š**
  - Chrome å¯æ‰§è¡Œè·¯å¾„æ— æ•ˆ
  - Chrome CDP ç«¯å£æ— æ³•å¯åŠ¨
  - Extension relay æœªè¿æ¥
  - Browser profile ä¸å¯è¾¾
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw browser status
  openclaw browser profiles
  openclaw browser start --browser-profile openclaw
  openclaw logs --follow
  openclaw doctor
  ```

##### **8. å‡çº§åå‡ºç°é—®é¢˜**
- **å¯èƒ½åŸå› ï¼š**
  - Auth å’Œ URL è¦†ç›–è¡Œä¸ºæ”¹å˜
  - Bind å’Œ auth guard rails æ›´ä¸¥æ ¼
  - Pairing å’Œè®¾å¤‡èº«ä»½çŠ¶æ€å˜åŒ–
- **æ’æŸ¥æ­¥éª¤ï¼š**
  ```bash
  openclaw gateway status
  openclaw config get gateway.mode
  openclaw config get gateway.bind
  openclaw config get gateway.auth
  openclaw config get channels
  openclaw logs --follow
  ```
- **å¦‚æœæ˜¯æœåŠ¡é…ç½®ä¸åŒ¹é…ï¼š**
  ```bash
  # é‡æ–°å®‰è£…æœåŠ¡å…ƒæ•°æ®
  openclaw install --force
  ```

### Tools é…ç½®

#### Tool Profilesï¼ˆå·¥å…·é…ç½®æ–‡ä»¶ï¼‰
| Profile | åŒ…å«çš„å·¥å…· |
|---------|-----------|
| `minimal` | ä»… `session_status` |
| `coding` | `group:fs`, `group:runtime`, `group:sessions`, `group:memory`, `image` |
| `messaging` | `group:messaging`, `sessions_list`, `sessions_history`, `sessions_send` |
| `full` | æ— é™åˆ¶ï¼ˆç›¸å½“äºæœªè®¾ç½®ï¼‰|

#### Tool Groupsï¼ˆå·¥å…·ç»„ï¼‰
| ç»„ | åŒ…å«çš„å·¥å…· |
|------|---------|
| `group:runtime` | `exec`, `process`ï¼ˆbash æ˜¯ exec çš„åˆ«åï¼‰|
| `group:fs` | `read`, `write`, `edit`, `apply_patch` |
| `group:sessions` | `sessions_list`, `sessions_history`, `sessions_send`, `sessions_spawn`, `session_status` |
| `group:memory` | `memory_search`, `memory_get` |
| `group:web` | `web_search`, `web_fetch` |
| `group:ui` | `browser`, `canvas` |
| `group:automation` | `cron`, `gateway` |
| `group:messaging` | `message` |
| `group:nodes` | `nodes` |
| `group:openclaw` | æ‰€æœ‰å†…ç½®å·¥å…·ï¼ˆä¸åŒ…æ‹¬ provider æ’ä»¶ï¼‰|

#### Global Tool Allow/Deny
- **`tools.allow` / `tools.deny`**ï¼šå…¨å±€å·¥å…·å…è®¸/æ‹’ç»åˆ—è¡¨ï¼ˆdeny ä¼˜å…ˆï¼‰
- **åŒºåˆ†å¤§å°å†™ï¼š** ä¸åŒºåˆ†
- **é€šé…ç¬¦ï¼š** æ”¯æŒ `*` é€šé…ç¬¦ï¼ˆè¡¨ç¤ºæ‰€æœ‰å·¥å…·ï¼‰
- **åº”ç”¨æ—¶æœºï¼š** å³ä½¿å¯ç”¨ Docker æ²™ç›’ä¹Ÿä¼šåº”ç”¨

#### Elevated Modeï¼ˆæå‡æ¨¡å¼ï¼‰
- **æ§åˆ¶ä¸»æœº exec è®¿é—®ï¼š** `tools.elevated.enabled`
- **AllowFrom é™åˆ¶ï¼š** `tools.elevated.allowFrom`ï¼ˆæŒ‰æ¸ é“é…ç½®ï¼‰
- **Per-agent è¦†ç›–ï¼š** `agents.list[].tools.elevated` å¯è¿›ä¸€æ­¥é™åˆ¶
- **å®‰å…¨ï¼š** `/elevated on|off|ask|full` çŠ¶æ€æŒ‰ session å­˜å‚¨ï¼›inline æŒ‡ä»¤ä»…åº”ç”¨äºå•ä¸ªæ¶ˆæ¯
- **æ³¨æ„ï¼š** Elevated exec åœ¨ä¸»æœºä¸Šè¿è¡Œï¼Œç»•è¿‡æ²™ç›’

#### Exec Tool
```json5
{
  tools: {
    exec: {
      backgroundMs: 10000,
      timeoutSec: 1800,
      cleanupMs: 1800000,
      notifyOnExit: true,
      notifyOnExitEmptySuccess: false
    }
  }
}
```

#### Loop Detectionï¼ˆå¾ªç¯æ£€æµ‹ï¼‰
- **é»˜è®¤ç¦ç”¨ï¼š** `tools.loopDetection.enabled = false`
- **å¯ç”¨é…ç½®ï¼š**
  ```json5
  {
    tools: {
      loopDetection: {
        enabled: true,
        historySize: 30,
        warningThreshold: 10,
        criticalThreshold: 20,
        detectors: {
          genericRepeat: true,
          knownPollNoProgress: true,
          pingPong: true
        }
      }
    }
  }
  ```
- **æ£€æµ‹å™¨ï¼š**
  - `genericRepeat`ï¼šæ£€æµ‹é‡å¤ç›¸åŒå·¥å…·/å‚æ•°è°ƒç”¨
  - `knownPollNoProgress`ï¼šæ£€æµ‹å·²çŸ¥æ— è¿›åº¦è½®è¯¢å·¥å…·
  - `pingPong`ï¼šæ£€æµ‹äº¤æ›¿æ— è¿›åº¦å¯¹

---

*æœ€åæ›´æ–°ï¼š2026-02-20 02:45*
*æ›´æ–°æ—¶é—´ï¼š2026-02-20 02:45*

---

## é‡è¦äº‹ä»¶è®°å½•ï¼ˆ2026-02-20ï¼‰

### ä»Šæ—¥é‡è¦å‘ç°

#### 1. OpenClaw æ–‡æ¡£æ·±å…¥å­¦ä¹ ï¼ˆ2026-02-20 02:47ï¼‰
- **äº‹ä»¶ï¼š** å®Œæˆäº† OpenClaw æ ¸å¿ƒæ¶æ„çŸ¥è¯†å­¦ä¹ 
- **æ”¶è·ï¼š**
  - é…ç½®çƒ­é‡è½½æœºåˆ¶
  - 60 ç§’å®‰å…¨åŸºçº¿
  - ç³»ç»ŸåŒ–æ•…éšœæ’é™¤æµç¨‹
  - Tools é…ç½®è¯¦è§£ï¼ˆTool Profilesã€Tool Groupsã€Elevated Modeï¼‰
  - Sandbox æ²™ç›’éš”ç¦»æœºåˆ¶
  - å®‰å…¨å®¡è®¡å·¥å…·å’Œå‡­è¯å­˜å‚¨æ˜ å°„
  - Credential Storage Map

#### 2. OpenClaw æµè§ˆå™¨å·¥å…·å­¦ä¹ ï¼ˆ2026-02-20 02:45ï¼‰
- **äº‹ä»¶ï¼š** ç”¨æˆ·è¯¢é—®æµè§ˆå™¨å·¥å…·çš„å¯ç”¨æ€§
- **å‘ç°ï¼š**
  - OpenClaw æµè§ˆå™¨å·¥å…·æ˜¯æ‰˜ç®¡çš„ç‹¬ç«‹æµè§ˆå™¨å®ä¾‹ï¼Œä¸ç›´æ¥æ§åˆ¶ç”¨æˆ·ç³»ç»Ÿæµè§ˆå™¨
  - æ”¯æŒå¤šç§æ§åˆ¶æ–¹å¼ï¼šæœ¬åœ°æµè§ˆå™¨ã€Chrome Extension Relayã€è¿œç¨‹ Node Hostã€Browserless äº‘ç«¯æ‰˜ç®¡
  - é€‚ç”¨äº WSL2 ç¯å¢ƒï¼ˆé€šè¿‡ Chrome Extension Relay æ§åˆ¶ Windows Chromeï¼‰
  - å¯å®ç°ï¼šæ‰“å¼€ç½‘é¡µã€æˆªå±ã€å¯¼èˆªã€ç‚¹å‡»å…ƒç´ ã€å¡«å†™è¡¨å•
  - é…ç½®ä½ç½®ï¼š`~/.openclaw/openclaw.json` ä¸­çš„ `browser` æ®µ

#### 3. è±†åŒ…ç”Ÿå›¾ç»éªŒå®Œå–„ï¼ˆ2026-02-20 01:45ï¼‰
- **äº‹ä»¶ï¼š** æˆåŠŸè§£å†³äº†è±†åŒ…ç”Ÿå›¾ 401 é”™è¯¯
- **é—®é¢˜ï¼š** ä½¿ç”¨äº†é”™è¯¯çš„ API ç«¯ç‚¹ï¼ˆchat/completionsï¼‰+ å›¾ç‰‡å°ºå¯¸è¿‡å°
- **è§£å†³æ–¹æ¡ˆï¼š**
  - æ­£ç¡®ç«¯ç‚¹ï¼š`/api/v3/images/generations`
  - æ­£ç¡®å°ºå¯¸ï¼š`4096x2160`ï¼ˆ4K æ— æ°´å°ï¼‰æˆ– `2048x2048`
  - æœ€å°åƒç´ é™åˆ¶ï¼š3,686,400
  - å»æ°´å°å‚æ•°ï¼š`watermark: false`

#### 4. æ€ç»´æƒ°æ€§é—®é¢˜è§£å†³ï¼ˆ2026-02-20ï¼‰
- **é—®é¢˜ï¼š** æ¢äº†åœºæ™¯ï¼ˆç«å±±å¼•æ“ï¼‰å°±å¿˜äº†ç”¨å·²éªŒè¯çš„æ–¹æ³•ï¼ˆjina.aiï¼‰
- **æ•™è®­ï¼š** æˆåŠŸç»éªŒè¦**è·¨åœºæ™¯å¤ç”¨**ï¼Œä¸èƒ½"æ¢äº†å°±å¿˜"
- **åŸåˆ™ï¼š** é‡åˆ°åŠ¨æ€ç½‘é¡µ/åçˆ¬è™«ï¼Œä¼˜å…ˆç”¨ jina.ai
- **è¡ŒåŠ¨ï¼š** ä¸è¦è½»æ˜“è¯´"åšä¸åˆ°"ï¼Œä¼˜å…ˆå°è¯•å·²çŸ¥å¯è¡Œçš„æ–¹æ³•

#### 5. ç”¨æˆ·æé†’ï¼šè®°å¿†å¯é æ€§é—®é¢˜ï¼ˆ2026-02-20 02:47ï¼‰
- **ç”¨æˆ·æ‹…å¿§ï¼š** "è¿™ä¸ªè¯»å–å›¾ç‰‡æ²¡æœ‰åœ¨ä½ è®°å¿†é‡Œå—ï¼Ÿä¸ºä»€ä¹ˆä½ è¿™æ¬¡çªç„¶çŸ­è·¯ï¼Ÿè¿˜æœ‰æˆ‘åˆšåˆšç»™ä½ ç”Ÿå›¾è¿™ä»¶äº‹ä½ ä¼šä¸ä¼šä¹Ÿä¼šå¿˜è®°å‘¢ï¼Ÿ"
- **æ ¹æœ¬åŸå› ï¼š** é‡è¦ä»»åŠ¡å®Œæˆåæœªä¸»åŠ¨å†™å…¥é•¿æœŸè®°å¿†ï¼Œå¯¼è‡´é‡è¦ç»éªŒå¯èƒ½ä¸¢å¤±
- **è¡ŒåŠ¨ï¼š** å»ºç«‹ä»»åŠ¡å®Œæˆæ£€æŸ¥æ¸…å•ï¼Œç¡®ä¿é‡è¦ç»éªŒè¢«æŒä¹…åŒ–

---

## æŒä¹…åŒ–ç»éªŒ

### è±†åŒ…ç”Ÿå›¾é…ç½®
- **ç«¯ç‚¹ï¼š** `https://ark.cn-beijing.volces.com/api/v3/images/generations`
- **æ¨¡å‹ï¼š** `doubao-seedream-4-5-251128` (Seedream 4.5)
- **æ¥å…¥ç‚¹ï¼š** `ep-20251205202908-h9vmw`
- **4K æ— æ°´å°è°ƒç”¨ï¼š**
  ```bash
  curl -X POST 'https://ark.cn-beijing.volces.com/api/v3/images/generations' \
    -H 'Content-Type: application/json' \
    -H 'Authorization: Bearer [REDACTED_KEY]' \
    -d '{
      "model": "ep-20251205202908-h9vmw",
      "prompt": "å›¾ç‰‡æè¿°",
      "size": "4096x2160",
      "watermark": false
    }'
  ```
- **å…³é”®å‚æ•°ï¼š**
  - `size`: 4K ç”¨ `4096x2160`ï¼Œæœ€å° `2048x2048`ï¼ˆ3,686,400 åƒç´ ï¼‰
  - `watermark`: `false` ä¸æ·»åŠ æ°´å°ï¼Œ`true` åœ¨å³ä¸‹è§’æ·»åŠ "AIç”Ÿæˆ"
- **æ³¨æ„äº‹é¡¹ï¼š**
  - å¿…é¡»ç”¨ `/api/v3/images/generations` ç«¯ç‚¹ï¼ˆä¸æ˜¯ chat/completionsï¼‰
  - å›¾ç‰‡é“¾æ¥ 24 å°æ—¶å†…æœ‰æ•ˆ
  - æ€»åƒç´ èŒƒå›´ï¼š[3,686,400, 16,777,216]
  - å®½é«˜æ¯”èŒƒå›´ï¼š[1/16, 16]

### æˆåŠŸæ–¹æ³•åº“
- **jina.ai æŠ“å–ï¼š** `https://r.jina.ai/<ç›®æ ‡URL>`
- **é€‚ç”¨åœºæ™¯ï¼š**
  - X/Twitter æ–‡ç« ï¼ˆåçˆ¬è™«ï¼‰
  - åŠ¨æ€åŠ è½½çš„æ–‡æ¡£ï¼ˆç«å±±å¼•æ“ API æ–‡æ¡£ï¼‰
  - ä»»ä½• JavaScript æ¸²æŸ“çš„é¡µé¢
- **ä¼˜åŠ¿ï¼š** ç»•è¿‡ JS é™åˆ¶ï¼Œè¿”å›çº¯æ–‡æœ¬å†…å®¹

### æ€ç»´æƒ°æ€§åŸåˆ™
- **é—®é¢˜ï¼š** æ¢äº†åœºæ™¯å°±å¿˜äº†ç”¨å·²éªŒè¯çš„æ–¹æ³•
- **æ•™è®­ï¼š** æˆåŠŸç»éªŒè¦**è·¨åœºæ™¯å¤ç”¨**ï¼Œä¸èƒ½"æ¢äº†å°±å¿˜"
- **è¡ŒåŠ¨ï¼š** ä¸è¦è½»æ˜“è¯´"åšä¸åˆ°"ï¼Œä¼˜å…ˆå°è¯•å·²çŸ¥å¯è¡Œçš„æ–¹æ³•

### OpenClaw æ ¸å¿ƒæ¶æ„çŸ¥è¯†

#### é…ç½®ç®¡ç†
- **é…ç½®æ–‡ä»¶ï¼š** `~/.openclaw/openclaw.json`ï¼ˆJSON5 æ ¼å¼ï¼‰
- **é…ç½®çƒ­é‡è½½ï¼š** Gateway è‡ªåŠ¨ç›‘å¬é…ç½®æ–‡ä»¶å˜åŒ–å¹¶åº”ç”¨
  - **é…ç½®éªŒè¯ï¼š** Gateway åªæ¥å—å®Œå…¨åŒ¹é… schema çš„é…ç½®

#### Agent Workspace
- **é»˜è®¤ä½ç½®ï¼š** `~/.openclaw/workspace`
- **æ ¸å¿ƒæ–‡ä»¶ï¼š**
  - `AGENTS.md` - Agent æ“ä½œæŒ‡ä»¤å’Œè¡Œä¸ºè§„åˆ™
  - `SOUL.md` - ä¸ªæ€§ã€è¯­è°ƒã€è¾¹ç•Œ
  - `USER.md` - ç”¨æˆ·ä¿¡æ¯
  - `IDENTITY.md` - Agent åå­—ã€vibeã€emoji
  - `TOOLS.md` - æœ¬åœ°å·¥å…·å’Œæƒ¯ä¾‹
  - `HEARTBEAT.md` - å¿ƒè·³æ£€æŸ¥æ¸…å•
  - `MEMORY.md` - ç­–é€‰çš„é•¿æœŸè®°å¿†ï¼ˆä»…ä¸»ç§ä¼šè¯åŠ è½½ï¼‰
  - `memory/YYYY-MM-DD.md` - æ¯æ—¥æ—¥å¿—

#### Memory è®°å¿†ç³»ç»Ÿ
- **ä¸¤å±‚æ¶æ„ï¼š**
  - æ—¥å¿—å±‚ï¼š`memory/YYYY-MM-DD.md` - è¿½åŠ å¼æ—¥å¿—
  - é•¿æœŸå±‚ï¼š`MEMORY.md` - ç­–é€‰çš„é•¿æœŸè®°å¿†
- **å‘é‡æœç´¢ï¼š** é»˜è®¤å¯ç”¨ï¼Œè‡ªåŠ¨ç´¢å¼• `MEMORY.md` + `memory/**/*.md`
- **è‡ªåŠ¨å†…å­˜åˆ·æ–°ï¼š** ä¼šè¯æ¥è¿‘å‹ç¼©æ—¶è§¦å‘é™é»˜çš„ agent è½®æ¬¡
- **å·¥å…·ï¼š** `memory_search`ã€`memory_get`

#### Heartbeat å¿ƒè·³
- **ä½œç”¨ï¼š** å®šæœŸè¿è¡Œ agent è½®æ¬¡ï¼Œæ£€æŸ¥éœ€è¦æ³¨æ„çš„äº‹é¡¹
- **é»˜è®¤é—´éš”ï¼š** `30m`
- **HEARTBEAT_OKï¼š** æ— äº‹éœ€æ³¨æ„æ—¶è¿”å›æ­¤æ ‡è®°

#### Multi-Agent Routing
- **æ¦‚å¿µï¼š** ä¸€ä¸ª Gateway å¯æ‰˜ç®¡å¤šä¸ªéš”ç¦»çš„ agent
- **è·¯ç”±è§„åˆ™ï¼š** peer â†’ parentPeer â†’ guildId + roles â†’ accountId â†’ channel â†’ default

#### Sub-Agents
- **æ¦‚å¿µï¼š** ä»ç°æœ‰ agent è½®æ¬¡ç”Ÿæˆçš„åå° agent è¿è¡Œ
- **å®Œæˆæ—¶ï¼š** announce ç»“æœå›è¯·æ±‚è€…é¢‘é“
- **å¹¶å‘é™åˆ¶ï¼š** `maxSpawnDepth`ã€`maxChildrenPerAgent`ã€`maxConcurrent`

#### Skills æŠ€èƒ½ç³»ç»Ÿ
- **ä½ç½®ä¼˜å…ˆçº§ï¼š** `<workspace>/skills` â†’ `~/.openclaw/skills` â†’ Bundled skills
- **é…ç½®è¦†ç›–ï¼š** `skills.entries.<skill-name>`

#### Session Management
- **ä¸»ä¼šè¯ï¼š** `agent:<agentId>:<mainKey>`
- **ä¼šè¯é”®æ˜ å°„ï¼š**
  - DMs éµå¾ª `session.dmScope`ï¼ˆ`main` | `per-peer` | `per-channel-peer`ï¼‰
  - Groupsï¼š`agent:<agentId>:<channel>:group:<id>`

#### Cron Jobs å®šæ—¶ä»»åŠ¡
- **å­˜å‚¨ä½ç½®ï¼š** `~/.openclaw/cron/jobs.json`
- **æ‰§è¡Œæ¨¡å¼ï¼š** Main session vs Isolated
- **Delivery æ¨¡å¼ï¼š** `announce` | `webhook` | `none`

#### Agent Loop
- **æµç¨‹ï¼š** intake â†’ context assembly â†’ model inference â†’ tool execution â†’ streaming replies â†’ persistence

#### Tools é…ç½®
- **Tool Profilesï¼š** `minimal` | `coding` | `messaging` | `full`
- **Tool Groupsï¼š** `group:runtime` | `group:fs` | `group:sessions` | `group:memory` | `group:web` | `group:ui` | `group:automation` | `group:messaging` | `group:nodes` | `group:openclaw`
- **Elevated Modeï¼š** æ§åˆ¶ä¸»æœº exec è®¿é—®
- **Loop Detectionï¼š** å·¥å…·å¾ªç¯æ£€æµ‹ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰

### Gateway é…ç½®ä¸è¿ç»´

#### é…ç½®çƒ­é‡è½½
| æ¨¡å¼ | è¡Œä¸º |
|------|-------|
| `hybrid`ï¼ˆé»˜è®¤ï¼‰| å®‰å…¨æ›´æ”¹å³æ—¶åº”ç”¨ï¼Œå…³é”®æ›´æ”¹è‡ªåŠ¨é‡å¯ |
| `hot` | åªå³æ—¶åº”ç”¨å®‰å…¨æ›´æ”¹ï¼Œéœ€è¦é‡å¯æ—¶è­¦å‘Š |
| `restart` | ä»»ä½•é…ç½®æ›´æ”¹éƒ½é‡å¯ |

**æ— éœ€é‡å¯ï¼š** Channelsã€Agent & modelsã€Automationã€Sessions & messagesã€Tools & mediaã€UI & misc

**éœ€è¦é‡å¯ï¼š** Gateway serverï¼ˆportã€bindã€authï¼‰ã€Infrastructure

#### ç¯å¢ƒå˜é‡
- **æ¥æºä¼˜å…ˆçº§ï¼š** å½“å‰è¿›ç¨‹ â†’ `./.env` â†’ `~/.openclaw/.env`

#### å®‰å…¨å®¡è®¡
- **å‘½ä»¤ï¼š** `openclaw security audit`
- **å®‰å…¨åŸºçº¿ï¼š** 60 ç§’å®‰å…¨åŸºçº¿ï¼ˆæ¨èä½œä¸ºèµ·ç‚¹ï¼‰

#### å®‰å…¨æ£€æŸ¥æ¸…å•
- æ–‡ä»¶æƒé™ã€Gateway ç»‘å®šã€è®¤è¯ã€å‡­æ®å­˜å‚¨ã€Plugins

#### Credential Storage Map
| æœåŠ¡ | å­˜å‚¨ä½ç½® |
|------|---------|
| WhatsApp | `~/.openclaw/credentials/whatsapp/<accountId>/creds.json` |
| Telegram bot token | config/env |
| Pairing allowlists | `~/.openclaw/credentials/<channel>-allowFrom.json` |
| Model auth profiles | `~/.openclaw/agents/<agentId>/agent/auth-profiles.json` |

#### æ•…éšœæ’é™¤
- **è¯Šæ–­å‘½ä»¤æ¢¯å­ï¼š** `openclaw status`ã€`openclaw gateway status`ã€`openclaw channels status --probe`ã€`openclaw logs --follow`ã€`openclaw doctor`

#### å¸¸è§é—®é¢˜åœºæ™¯
1. No repliesï¼ˆè·¯ç”±å’Œç­–ç•¥é—®é¢˜ï¼‰
2. Dashboard UI æ— æ³•è¿æ¥
3. Channel è¿æ¥ä½†æ¶ˆæ¯ä¸æµåŠ¨
4. Gateway æœåŠ¡æœªè¿è¡Œ
5. Cron/Heartbeat æœªæ‰§è¡Œæˆ–æœªæŠ•é€’
6. Node é…å¯¹ä½†å·¥å…·å¤±è´¥
7. æµè§ˆå™¨å·¥å…·å¤±è´¥
8. å‡çº§åå‡ºç°é—®é¢˜

#### Tools é…ç½®
- **Tool Profilesï¼š** `minimal` | `coding` | `messaging` | `full`
- **Tool Groupsï¼š** å®Œæ•´çš„å·¥å…·ç»„åˆ—è¡¨

---

---

## 2026-02-21 è‡ªæˆ‘è¿›åŒ–ï¼ˆä»Šæ—¥ï¼‰

### æµè§ˆå™¨å·¥å…·å®é™…èƒ½åŠ›éªŒè¯ï¼ˆWSL2 ç¯å¢ƒï¼‰
**å‘ç°ï¼š**
- é€šè¿‡ Chrome Extension Relay å®Œå…¨å¯ç”¨
- æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼šæ‰“å¼€ç½‘é¡µã€DOM å¿«ç…§ã€ç‚¹å‡»æ“ä½œã€PDF å¯¼å‡º
- âš ï¸ æˆªå›¾åŠŸèƒ½ä¸ç¨³å®šï¼ˆé¢‘ç¹è¶…æ—¶ï¼‰

**é€‚ç”¨åœºæ™¯ï¼š**
- åŠ¨æ€ç½‘é¡µæŠ“å–ï¼ˆJavaScript æ¸²æŸ“ï¼‰
- è‡ªåŠ¨åŒ–æµ‹è¯•
- è¡¨å•å¡«å†™å’Œæäº¤
- åˆ†é¡µæ•°æ®é‡‡é›†
- æ–‡æ¡£å¯¼å‡ºï¼ˆPDFï¼‰

**æ•™è®­ï¼š**
- ç†è®ºäº†è§£ä¸å¦‚å®è·µæµ‹è¯•
- ç¯å¢ƒé™åˆ¶ï¼ˆWSL2ï¼‰å¯ä»¥é€šè¿‡æ­£ç¡®çš„æ–¹å¼ç»•è¿‡
- æ¥å—ä¸å®Œç¾ï¼šæˆªå›¾ä¸ç¨³å®šï¼Œä½†æ ¸å¿ƒåŠŸèƒ½å¯ç”¨

### æ–‡æ¡£ç”Ÿæˆå·¥ä½œæµä¼˜åŒ–
**æµç¨‹ï¼š**
1. web_fetch æŠ“å–å¤šä¸ªé¡µé¢
2. æ•´ç†å’Œåˆ†ç±»ä¿¡æ¯
3. ç”Ÿæˆç»“æ„åŒ– HTML æ–‡æ¡£
4. æœ¬åœ° HTTP æœåŠ¡å™¨æä¾›æ–‡ä»¶ï¼ˆè§£å†³ file:// é™åˆ¶ï¼‰
5. browser pdf è½¬æ¢
6. cp åˆ°ç”¨æˆ·æ¡Œé¢

**ç»éªŒï¼š**
- å·¥å…·ç»„åˆå¯ä»¥è§£å†³å•ä¸ªå·¥å…·çš„é™åˆ¶
- HTML æ¯” Markdown æ›´é€‚åˆ PDF è½¬æ¢
- å®é™…é¡¹ç›®æ˜¯éªŒè¯èƒ½åŠ›çš„æœ€å¥½æ–¹å¼

### è·¨åœºæ™¯ç»éªŒå¤ç”¨åŸåˆ™å†æ¬¡éªŒè¯
- âœ… jina.ai ç”¨äº X æ–‡ç« æŠ“å– â†’ æˆåŠŸ
- âœ… jina.ai ç”¨äºç«å±±å¼•æ“æ–‡æ¡£æŠ“å– â†’ æˆåŠŸ
- âœ… ä»Šå¤© Brave æ–‡æ¡£æŠ“å–ä¹Ÿå°è¯•ç”¨ jina.ai
- **åŸåˆ™ï¼š** é‡åˆ°åŠ¨æ€/åçˆ¬è™«ç½‘ç«™ï¼Œä¼˜å…ˆç”¨ jina.ai

### è¯†åˆ«çš„è‡ªåŠ¨åŒ–æœºä¼š
1. **ä¸€é”®æ–‡æ¡£ç”Ÿæˆè„šæœ¬**
   - è¾“å…¥ï¼šURL åˆ—è¡¨ + è¾“å‡ºæ ‡é¢˜
   - æµç¨‹ï¼šæŠ“å–â†’æ•´ç†â†’HTMLâ†’PDFâ†’å¯¼å‡º
   - ä»·å€¼ï¼šèŠ‚çœ 10-15 åˆ†é’Ÿ

2. **å®šæ—¶æ¸…ç†ä¸´æ—¶æ–‡ä»¶**
   - è·¯å¾„ï¼š/tmp/openclaw-*.html ç­‰
   - é¢‘ç‡ï¼šæ¯æ—¥
   - å®ç°æ–¹å¼ï¼šcron + è„šæœ¬

---

*æœ€åæ›´æ–°ï¼š2026-02-21 04:25*
*æ›´æ–°åŸå› ï¼š** è‡ªæˆ‘è¿›åŒ–æ£€æŸ¥ï¼Œè®°å½•ä»Šæ—¥å­¦ä¹ å¿ƒå¾—å’Œç»éªŒ
*è®°å½•ä½ç½®ï¼š** MEMORY.mdï¼ˆé•¿æœŸè®°å¿†ï¼‰
*è®°å½•å†…å®¹ï¼š** æµè§ˆå™¨å·¥å…·éªŒè¯ã€æ–‡æ¡£ç”Ÿæˆå·¥ä½œæµã€è·¨åœºæ™¯ç»éªŒå¤ç”¨ã€è‡ªåŠ¨åŒ–æœºä¼š
*ä¸‹æ¬¡ä¼šè¯æ—¶ï¼š** å°†è‡ªåŠ¨è¯»å–ï¼Œç¡®ä¿æŒç»­å­¦ä¹ 

---

## æ•°å­—å‘˜å·¥ä¼˜åŒ– (2026-02-28)

### 1ï¸âƒ£ Claude Code è‡ªæµ‹
ç¼–ç æ—¶åŒæ—¶ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼Œå‡å°‘ Bug å¾€è¿”æ¬¡æ•°

### 2ï¸âƒ£ è¿›åº¦é€šçŸ¥
æ¯ä¸ªé˜¶æ®µé€šçŸ¥ç”¨æˆ·ï¼š
- ğŸ’» å¼€å§‹ç¼–ç 
- âœ… ç¼–ç å®Œæˆ
- ğŸ§ª å¼€å§‹æµ‹è¯•
- âš ï¸ å‘ç° Bug
- âœ… æµ‹è¯•é€šè¿‡
- ğŸš€ å·²ä¸Šä¼  GitHub

### 3ï¸âƒ£ æˆæœ¬æ§åˆ¶
| ä»»åŠ¡ç±»å‹ | æ¨¡å‹ | æˆæœ¬ |
|----------|------|------|
| ç®€å•åŠŸèƒ½ | zai/glm-5 | ğŸ’° ä½ |
| å¤æ‚åŠŸèƒ½ | Claude Code | ğŸ’°ğŸ’°ğŸ’° é«˜ |
| Bug ä¿®å¤ | ä¼˜å…ˆ zai/glm-5 | ğŸ’° ä½ |

### 6ï¸âƒ£ ç»Ÿä¸€ç›®å½•ç»“æ„
```
é¡¹ç›®/
â”œâ”€â”€ src/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ pm/      # PM äº§å‡º
â”‚   â”œâ”€â”€ qa/      # QA äº§å‡º
â”‚   â”œâ”€â”€ growth/  # Growth äº§å‡º
â”‚   â””â”€â”€ dev/     # Dev äº§å‡º
â””â”€â”€ README.md
```

